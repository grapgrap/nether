# 2026-02-14-plan-커맨드-도입

## 맥락

plan 컨셉이 정의되고 역방향 흐름이 도입되면서, 이를 실행할 커맨드의 형태를 결정해야 했다.
CLAUDE.md에 안내만 넣는 방식과 명시적 커맨드를 만드는 방식을 검토했다.

## 결정 내용

### 1. `/loom.plan` 커맨드를 Claude plan mode의 래퍼로 구현

구현 계획 수립 자체는 Claude의 plan mode에 위임하고, `/loom.plan`은 loom 맥락 주입과 방향 판단, 산출물 생성을 담당한다. 구현 계획은 plan mode가 워크스페이스 바깥에서 관리한다.

### 2. 정방향/역방향을 하나의 커맨드로 통합

만능 커맨드가 될 가능성이 있지만, loom 시스템은 워크플로를 강제하는 것이 아니라 사용자의 워크플로에 맞는 도구로 존재한다. 방향 선택은 사용자의 자율에 맡긴다.

### 3. 역방향 plan 완료 후 loom 산출물 생성

역방향일 때 plan 완료 후 concept/design/decision 문서를 생성하는 것까지 커맨드의 범위에 포함한다. 산출물 생성 전 사용자와 대화를 통해 내용을 확인한다.

### 제약 조건

- 기존 `/loom.specify`, `/loom.design` 커맨드와 일관된 구조 유지
- concept/design/decision 문서의 템플릿과 구조를 그대로 따름

### 전제 조건

- Claude의 plan mode가 구현 계획의 수립과 저장을 처리할 수 있음
- 역방향에서 생성되는 loom 산출물은 정방향에서 생성되는 것과 동일한 품질이어야 함

## 대안

### CLAUDE.md에 역방향 흐름 안내만 추가

- 설명: 커맨드 없이 CLAUDE.md의 AI 어시스턴트 안내 섹션에 역방향 흐름 지시를 추가
- 트레이드오프: 작업 분해는 잘 되겠지만, 산출물 생성(concept/design/decision)을 일관되게 수행할지 보장하기 어렵다. 배경 지시는 다단계 워크플로를 강하게 유도하지 못한다

### 역방향 전용 커맨드를 별도로 분리

- 설명: `/loom.plan`은 정방향 전용, `/loom.plan-from-spec` 같은 역방향 전용 커맨드를 별도로 생성
- 트레이드오프: 커맨드가 늘어나 사용자의 인지 부하가 증가한다. 정방향/역방향은 동일한 plan 행위의 진입점 차이일 뿐 본질적으로 다른 작업이 아니다

## 영향받는 컨셉

- [[plan]] - 커맨드로 구체화됨
