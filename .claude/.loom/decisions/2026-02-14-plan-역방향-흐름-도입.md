# 2026-02-14-plan-역방향-흐름-도입

## 맥락

loom 시스템의 워크플로(specify → design → plan)는 사용자가 의사결정자이자 구현자인 상황을 전제로 설계되었다.
엔터프라이즈 환경에서 개발자로 일할 때, 스펙은 외부에서 이미 결정되어 주어진다. 이 경우 specify 단계(요구사항에서 컨셉 도출)는 의미가 희미하고, design 단계도 시니어 개발자에게는 plan에서 자연스럽게 이뤄지는 작업과 겹친다.

그러나 concept/design 문서 자체의 가치는 여전히 유효하다. 문제는 문서의 가치가 아니라, 그것이 반드시 plan보다 선행되어야 한다는 순서 제약이었다.

## 결정 내용

### 1. plan이 외부 스펙을 직접 입력으로 받을 수 있도록 확장

기존에는 design 문서가 plan의 필수 입력이었다. 이를 완화하여, 외부 스펙(대화, 문서, MCP 등)을 직접 입력으로 받아 역방향으로 동작할 수 있게 한다.

### 2. 방향 감지는 진입점과 기존 문서 존재 여부로 판단

- 정방향: design이 이미 존재하거나 `/loom.design`에서 핸드오버된 경우
- 역방향: 관련 concept/design이 없는 상태에서 외부 스펙이 입력된 경우

### 3. 역방향에서 concept/design/decision을 부산물로 생성

역방향 plan은 작업을 분해하는 과정에서 파악된 핵심 개념과 설계 판단을 concept/design/decision 문서로 함께 생성한다. concept/design의 가치는 "순서"가 아니라 "기록"에 있기 때문이다.

### 제약 조건

- 기존 정방향 흐름(specify → design → plan)은 그대로 유지한다
- concept/design/decision 문서의 구조와 역할은 변하지 않는다

### 전제 조건

- 역방향 plan에 입력되는 외부 스펙은 이미 결정된 것이어야 한다 (모호한 아이디어는 specify의 영역)

## 대안

### specify/design을 엔터프라이즈용으로 별도 분리

- 설명: 엔터프라이즈 전용 워크플로 커맨드를 따로 만들어 두 가지 경로를 명시적으로 구분
- 트레이드오프: concept/design의 가치는 순서가 아니라 기록에 있으므로 별도 흐름을 만들 필요가 없다. 커맨드가 늘어나면 사용자의 인지 부하가 증가한다

### plan 실행 전에 항상 간소화된 specify를 강제

- 설명: 외부 스펙을 받더라도 concept을 먼저 생성한 뒤 plan으로 넘어가는 절차를 유지
- 트레이드오프: 엔터프라이즈에서 이미 결정된 스펙을 다시 specify하는 것은 불필요한 마찰이다. plan 과정에서 자연스럽게 concept이 도출되므로 강제할 이유가 없다

## 영향받는 컨셉

- [[plan]] - 입력 확장, 방향 감지, 산출물 생성 추가
- [[design]] - plan과의 관계가 "입력 전용"에서 "입력 또는 산출물"로 변경
- [[concept]] - plan의 역방향에서 산출물로 생성될 수 있음
